<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1"
  />
  <title>The Wind — 길드관리</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Supabase -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>
</head>
<body>
  <div class="page">
    <!-- 헤더 -->
    <header class="topbar">
      <div class="brand">
        <img src="assets/윈둥이.png" alt="logo" class="logo" />
        <div class="title">
          <h1>The Wind</h1>
          <p>길드관리 시스템에 오신걸 환영합니다.</p>
        </div>
      </div>

      <div class="authbox">
        <div id="authSignedOut" class="auth-row">
          <input id="email" type="email" placeholder="이메일" />
          <input id="password" type="password" placeholder="비밀번호" />
          <button id="loginBtn" class="btn">로그인</button>
          <button id="signupBtn" class="btn ghost">회원가입</button>
        </div>

        <div id="authSignedIn" class="auth-row" style="display:none">
          <span id="whoami" class="pill"></span>
          <a id="adminLink" href="admin.html" class="btn ghost" style="display:none">관리자 메뉴</a>
          <button id="logoutBtn" class="btn danger">로그아웃</button>
        </div>
      </div>
    </header>

    <!-- 본문 -->
    <main class="container">
      <!-- 로그인 전 보드 -->
      <section id="guestBoard" class="board">
        <!-- 내 전투력 (영상) -->
        <div class="stats-card">
          <h3>내 전투력</h3>
          <div class="video-box">
            <video src="assets/wind_strike.mp4" autoplay muted loop playsinline></video>
          </div>
        </div>

        <!-- 명예의 전당 (플레이스홀더) -->
        <div class="hof-card">
          <div class="hof-head">
            <h3>명예의 전당</h3>
            <div class="tabs">
              <button class="chip" disabled>종점부문</button>
              <button class="chip" disabled>전투력부문</button>
            </div>
          </div>
          <div id="hofGuest" class="hof"></div>
        </div>
      </section>

      <!-- 로그인 후 보드 -->
      <section id="authedBoard" class="board" style="display:none">
        <!-- 내 전투력 (입력/표시) -->
        <div class="stats-card">
          <h3>내 전투력</h3>

          <div class="stat-header">
            <div class="cell"><span>순위</span><strong id="rank">-</strong></div>
            <div class="cell"><span>레벨</span><strong id="levelLabel">-</strong></div>
            <div class="cell"><span>전투력</span><strong id="bpLabel">-</strong></div>
          </div>
          <div class="stat-hint">
            <b>스탯 업데이트</b> 저장 버튼을 누르기 전까지는 반영되지 않습니다.
          </div>

          <div class="stats-grid">
            <div class="stats-item">
              <label for="level">레벨</label>
              <input id="level" type="number" min="0" />
            </div>
            <div class="stats-item">
              <label for="attack">공격</label>
              <input id="attack" type="number" min="0" />
            </div>
            <div class="stats-item">
              <label for="defence">방어</label>
              <input id="defence" type="number" min="0" />
            </div>
            <div class="stats-item">
              <label for="accuracy">명중</label>
              <input id="accuracy" type="number" min="0" />
            </div>
            <div class="stats-item">
              <label for="memory_pct">기억%</label>
              <input id="memory_pct" type="number" step="0.01" min="0" max="100" />
            </div>
            <div class="stats-item">
              <label for="subjugate">토벌</label>
              <input id="subjugate" type="number" min="0" />
            </div>
          </div>

          <div id="attendLine" class="attendance-text"></div>

          <div class="actions">
            <button id="saveStats" class="btn primary">저장</button>
            <span id="saveResult" class="save-msg"></span>
          </div>
        </div>

        <!-- 명예의 전당 -->
        <div class="hof-card">
          <div class="hof-head">
            <h3>명예의 전당</h3>
            <div class="tabs">
              <button id="tabScore" class="chip on">전투력부문</button>
              <button id="tabTotal" class="chip">종점부문</button>
            </div>
          </div>
          <div id="hof" class="hof"></div>
        </div>
      </section>
    </main>

    <footer class="footer"></footer>
  </div>

  <!-- 환경설정: 프로젝트에 맞게 교체 -->
  <script>
    window.__SB_URL__  = "https://YOUR-PROJECT.supabase.co";
    window.__SB_ANON__ = "YOUR-ANON-KEY";
  </script>
  <script src="app.js"></script>
</body>
</html>
